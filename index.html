<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AutoPost Manager</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loader">
            <div class="spinner"></div>
            <p>Բեռնվում է...</p>
        </div>
    </div>

    <!-- Main Container -->
    <div id="app" class="app-container hidden">
        
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <button id="menu-btn" class="icon-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M3 12H21M3 6H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <h1 class="app-title">AutoPost</h1>
            </div>
            <div class="header-right">
                <button id="notifications-btn" class="icon-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 0 1-3.46 0" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span class="notification-badge hidden">0</span>
                </button>
                <button id="settings-btn" class="icon-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 1v6m0 6v6M1 12h6m6 0h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Side Menu -->
        <aside id="side-menu" class="side-menu">
            <div class="menu-header">
                <div class="user-info">
                    <div class="user-avatar">
                        <span id="user-initials">AP</span>
                    </div>
                    <div class="user-details">
                        <h3 id="user-name">Loading...</h3>
                        <p id="user-status">Բաժանորդ</p>
                    </div>
                </div>
            </div>
            <nav class="menu-nav">
                <a href="#" data-page="dashboard" class="menu-item active">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="14" y="3" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="3" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                        <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>Գլխավոր</span>
                </a>
                <a href="#" data-page="scheduled" class="menu-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>Պլանավորված</span>
                    <span class="badge" id="scheduled-count">0</span>
                </a>
                <a href="#" data-page="recurring" class="menu-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M17 1l4 4-4 4M3 11V9a4 4 0 0 1 4-4h14M7 23l-4-4 4-4M21 13v2a4 4 0 0 1-4 4H3" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>Կրկնվող</span>
                    <span class="badge" id="recurring-count">0</span>
                </a>
                <a href="#" data-page="drafts" class="menu-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2"/>
                        <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>Սևագրեր</span>
                    <span class="badge" id="drafts-count">0</span>
                </a>
                <a href="#" data-page="analytics" class="menu-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M12 20V10M6 20V4M18 20v-7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span>Վիճակագրություն</span>
                </a>
                <a href="#" data-page="channels" class="menu-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>Ալիքներ</span>
                </a>
            </nav>
            <div class="menu-footer">
                <button id="theme-toggle" class="menu-item">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span id="theme-label">Մուգ թեմա</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                
                <!-- Quick Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon scheduled">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <p class="stat-label">Պլանավորված</p>
                            <h3 class="stat-value" id="stat-scheduled">0</h3>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon recurring">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M17 1l4 4-4 4M3 11V9a4 4 0 0 1 4-4h14" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <p class="stat-label">Կրկնվող</p>
                            <h3 class="stat-value" id="stat-recurring">0</h3>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon sent">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <p class="stat-label">Ուղարկված</p>
                            <h3 class="stat-value" id="stat-sent">0</h3>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon drafts">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <div class="stat-info">
                            <p class="stat-label">Սևագրեր</p>
                            <h3 class="stat-value" id="stat-drafts">0</h3>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="section">
                    <h2 class="section-title">Արագ գործողություններ</h2>
                    <div class="action-grid">
                        <button class="action-btn" data-action="new-scheduled">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 8v8M8 12h8" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Նոր պլանավորված</span>
                        </button>

                        <button class="action-btn" data-action="new-recurring">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M17 1l4 4-4 4M3 11V9a4 4 0 0 1 4-4h14M7 23l-4-4 4-4M21 13v2a4 4 0 0 1-4 4H3" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Նոր կրկնվող</span>
                        </button>

                        <button class="action-btn" data-action="new-draft">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor" stroke-width="2"/>
                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Նոր սևագիր</span>
                        </button>

                        <button class="action-btn" data-action="connect-channel">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <span>Միացնել ալիք</span>
                        </button>
                    </div>
                </div>

                <!-- Recent Messages -->
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">Վերջին նամակները</h2>
                        <button class="text-btn" data-action="view-all">
                            Տեսնել բոլորը
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </button>
                    </div>
                    <div id="recent-messages" class="message-list">
                        <!-- Messages will be loaded here -->
                    </div>
                </div>

                <!-- Connected Channel -->
                <div class="section">
                    <h2 class="section-title">Միացված ալիք</h2>
                    <div id="connected-channel" class="channel-card">
                        <div class="channel-placeholder">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                                <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <p>Ալիք չի միացված</p>
                            <button class="btn-primary" data-action="connect-channel">
                                Միացնել ալիք
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scheduled Messages Page -->
            <div id="scheduled-page" class="page">
                <div class="page-header">
                    <h2 class="page-title">Պլանավորված նամակներ</h2>
                    <button class="btn-primary" data-action="new-scheduled">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Ավելացնել
                    </button>
                </div>
                <div class="filters">
                    <input type="search" class="search-input" placeholder="Փնտրել..." id="search-scheduled">
                    <select class="filter-select" id="filter-scheduled">
                        <option value="all">Բոլորը</option>
                        <option value="today">Այսօր</option>
                        <option value="week">Այս շաբաթ</option>
                        <option value="month">Այս ամիս</option>
                    </select>
                </div>
                <div id="scheduled-list" class="message-list">
                    <!-- Scheduled messages will be loaded here -->
                </div>
            </div>

            <!-- Recurring Messages Page -->
            <div id="recurring-page" class="page">
                <div class="page-header">
                    <h2 class="page-title">Կրկնվող նամակներ</h2>
                    <button class="btn-primary" data-action="new-recurring">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Ավելացնել
                    </button>
                </div>
                <div class="filters">
                    <input type="search" class="search-input" placeholder="Փնտրել..." id="search-recurring">
                    <select class="filter-select" id="filter-recurring">
                        <option value="all">Բոլորը</option>
                        <option value="active">Ակտիվ</option>
                        <option value="paused">Դադարեցված</option>
                    </select>
                </div>
                <div id="recurring-list" class="message-list">
                    <!-- Recurring messages will be loaded here -->
                </div>
            </div>

            <!-- Drafts Page -->
            <div id="drafts-page" class="page">
                <div class="page-header">
                    <h2 class="page-title">Սևագրեր</h2>
                    <button class="btn-primary" data-action="new-draft">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Նոր սևագիր
                    </button>
                </div>
                <div class="filters">
                    <input type="search" class="search-input" placeholder="Փնտրել..." id="search-drafts">
                </div>
                <div id="drafts-list" class="message-list">
                    <!-- Drafts will be loaded here -->
                </div>
            </div>

            <!-- Analytics Page -->
            <div id="analytics-page" class="page">
                <div class="page-header">
                    <h2 class="page-title">Վիճակագրություն</h2>
                </div>
                <div class="analytics-grid">
                    <!-- Charts and stats will be loaded here -->
                </div>
            </div>

            <!-- Channels Page -->
            <div id="channels-page" class="page">
                <div class="page-header">
                    <h2 class="page-title">Ալիքների կառավարում</h2>
                    <button class="btn-primary" data-action="connect-channel">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Միացնել ալիք
                    </button>
                </div>
                <div id="channels-list" class="channels-grid">
                    <!-- Channels will be loaded here -->
                </div>
            </div>

        </main>

        <!-- Floating Action Button -->
        <button id="fab" class="fab">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
            </svg>
        </button>

    </div>

    <!-- Modals -->
    <!-- New Message Modal -->
    <div id="message-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Նոր նամակ</h3>
                <button class="close-modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <form id="message-form">
                    <!-- Message Editor -->
                    <div class="form-group">
                        <label>Նամակի տեքստ</label>
                        <div class="editor-toolbar">
                            <button type="button" class="toolbar-btn" data-format="bold" title="Թավ">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6zM6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </button>
                            <button type="button" class="toolbar-btn" data-format="italic" title="Շեղ">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M19 4h-9M14 20H5M15 4L9 20" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </button>
                            <button type="button" class="toolbar-btn" data-format="code" title="Կոդ">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M16 18l6-6-6-6M8 6l-6 6 6 6" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </button>
                            <button type="button" class="toolbar-btn" data-format="link" title="Հղում">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </button>
                        </div>
                        <textarea id="message-content" class="message-textarea" placeholder="Մուտքագրեք նամակի տեքստը..." rows="6"></textarea>
                        <div class="char-count">
                            <span id="char-count">0</span> / 4096
                        </div>
                    </div>

                    <!-- Media Attachments -->
                    <div class="form-group">
                        <label>Մեդիա ֆայլեր</label>
                        <div class="media-upload">
                            <input type="file" id="media-upload" accept="image/*,video/*" multiple hidden>
                            <button type="button" class="upload-btn" onclick="document.getElementById('media-upload').click()">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                <span>Ավելացնել մեդիա</span>
                            </button>
                        </div>
                        <div id="media-preview" class="media-preview"></div>
                    </div>

                    <!-- Schedule Settings -->
                    <div class="form-group" id="schedule-settings">
                        <label>Ժամանակացույց</label>
                        <div class="datetime-inputs">
                            <input type="date" id="schedule-date" class="form-input">
                            <input type="time" id="schedule-time" class="form-input">
                        </div>
                    </div>

                    <!-- Recurring Settings -->
                    <div class="form-group hidden" id="recurring-settings">
                        <label>Կրկնության ռեժիմ</label>
                        <div class="recurring-options">
                            <button type="button" class="option-btn" data-recurring="daily">Ամեն օր</button>
                            <button type="button" class="option-btn" data-recurring="weekly">Շաբաթական</button>
                            <button type="button" class="option-btn" data-recurring="monthly">Ամսական</button>
                            <button type="button" class="option-btn" data-recurring="custom">Հատուկ</button>
                        </div>
                        <div id="custom-recurring" class="hidden">
                            <div class="weekday-selector">
                                <button type="button" class="weekday-btn" data-day="1">Երկ</button>
                                <button type="button" class="weekday-btn" data-day="2">Երք</button>
                                <button type="button" class="weekday-btn" data-day="3">Չրք</button>
                                <button type="button" class="weekday-btn" data-day="4">Հնգ</button>
                                <button type="button" class="weekday-btn" data-day="5">Ուրբ</button>
                                <button type="button" class="weekday-btn" data-day="6">Շբթ</button>
                                <button type="button" class="weekday-btn" data-day="0">Կիր</button>
                            </div>
                            <input type="time" id="recurring-time" class="form-input">
                        </div>
                    </div>

                    <!-- Buttons -->
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" data-action="save-draft">
                            Պահպանել որպես սևագիր
                        </button>
                        <button type="submit" class="btn-primary">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            Պլանավորել
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="telegram.js"></script>
    <script src="sync.js"></script>
    <script src="app.js"></script>
</body>
</html>